<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script src="face-api.js"></script>
  <script src="js/commons.js"></script>
  <script src="js/drawing.js"></script>
  <script src="js/faceDetectionControls.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
</head>
<body>
 <center> <img src="data:image/png;base64,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" /></center>
  <div class="center-content page-container">
  <center>
    <h1 style="color: grey">Realtime Face Detection</h1>
    <div class="progress" id="loader">
      <div class="indeterminate"></div>
    </div>
    <div style="position: relative" class="margin">
      <video onplay="onPlay(this)" id="inputVideo" autoplay muted></video>
      <canvas id="overlay" />
    </div>
  </center>
    <center>
      <!-- fps_meter -->
      <div id="fps_meter" class="row side-by-side">
        <div>
          <label for="fps" style="color: grey; padding-left: 10%">Estimated Fps:</label>
          <input disabled value="-" id="fps" type="text" class="bold">
        </div>
      </div>
  </center>
    <!-- ssd_mobilenetv1_controls -->
    <span id="ssd_mobilenetv1_controls">
      <div class="row side-by-side">
        <div class="row">
          <label for="minConfidence">Min Confidence:</label>
          <input disabled value="0.5" id="minConfidence" type="text" class="bold">
        </div>
        <button
          class="waves-effect waves-light btn"
          onclick="onDecreaseMinConfidence()"
        >
          <i class="material-icons left">-</i>
        </button>
        <button
          class="waves-effect waves-light btn"
          onclick="onIncreaseMinConfidence()"
        >
          <i class="material-icons left">+</i>
        </button>
      </div>
    </span>
    <!-- mtcnn_controls -->
    <span id="mtcnn_controls">
      <div class="row side-by-side">
        <div class="row">
          <label for="minFaceSize">Minimum Face Size:</label>
          <input disabled value="20" id="minFaceSize" type="text" class="bold">
        </div>
        <button
          class="waves-effect waves-light btn"
          onclick="onDecreaseMinFaceSize()"
        >
          <i class="material-icons left">-</i>
        </button>
        <button
          class="waves-effect waves-light btn"
          onclick="onIncreaseMinFaceSize()"
        >
          <i class="material-icons left">+</i>
        </button>
      </div>
    </span>
    <!-- mtcnn_controls -->
<footer>
<center style="color: aqua; padding-top: 3cm">Created by Piyush, Vallabh, Satvik, Rubina </center>
</footer>
  </body>

  <script>
    let forwardTimes = []
    let withFaceLandmarks = true
    let withBoxes = false

    function onChangeWithFaceLandmarks(e) {
      withFaceLandmarks = $(e.target).prop('checked')
    }

    function onChangeHideBoundingBoxes(e) {
      withBoxes = !$(e.target).prop('checked')
    }

    function updateTimeStats(timeInMs) {
      forwardTimes = [timeInMs].concat(forwardTimes).slice(0, 30)
      const avgTimeInMs = forwardTimes.reduce((total, t) => total + t) / forwardTimes.length
      $('#time').val(`${Math.round(avgTimeInMs)} ms`)
      $('#fps').val(`${faceapi.round(1000 / avgTimeInMs)}`)
    }

    async function onPlay() {
      const videoEl = $('#inputVideo').get(0)

      if(videoEl.paused || videoEl.ended || !isFaceDetectionModelLoaded())
        return setTimeout(() => onPlay())


      const options = getFaceDetectorOptions()

      const ts = Date.now()

      const faceDetectionTask = faceapi.detectSingleFace(videoEl, options)
      const result = withFaceLandmarks
        ? await faceDetectionTask.withFaceLandmarks()
        : await faceDetectionTask

      updateTimeStats(Date.now() - ts)

      const drawFunction = withFaceLandmarks
        ? drawLandmarks
        : drawDetections

      if (result) {
        drawFunction(videoEl, $('#overlay').get(0), [result], withBoxes)
      }

      setTimeout(() => onPlay())
    }

    async function run() {
      // load face detection and face landmark models
      await changeFaceDetector(TINY_FACE_DETECTOR)
      await faceapi.loadFaceLandmarkModel('/')
      changeInputSize(128)

      // try to access users webcam and stream the images
      // to the video element
      const stream = await navigator.mediaDevices.getUserMedia({ video: {} })
      const videoEl = $('#inputVideo').get(0)
      videoEl.srcObject = stream
    }

    function updateResults() {}

    $(document).ready(function() {
      initFaceDetectionControls()
      run()
    })
  </script>
</body>
</html>